<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CoC Decoration Checker</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: #0a0e27;
            background-image: 
                radial-gradient(circle at 20% 50%, rgba(29, 78, 216, 0.3) 0%, transparent 50%),
                radial-gradient(circle at 80% 80%, rgba(37, 99, 235, 0.2) 0%, transparent 50%);
            min-height: 100vh;
            padding: 20px;
            color: #e0e7ff;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: rgba(15, 23, 42, 0.95);
            border-radius: 16px;
            box-shadow: 
                0 0 40px rgba(59, 130, 246, 0.1),
                0 20px 60px rgba(0, 0, 0, 0.5);
            overflow: hidden;
            border: 1px solid rgba(59, 130, 246, 0.2);
        }

        .header {
            background: linear-gradient(135deg, #1e3a8a 0%, #1e40af 50%, #2563eb 100%);
            padding: 40px 30px;
            text-align: center;
            color: white;
            position: relative;
            overflow: hidden;
        }

        .header::before {
            content: '';
            position: absolute;
            top: -50%;
            right: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%);
            animation: pulse 4s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); opacity: 0.5; }
            50% { transform: scale(1.1); opacity: 0.3; }
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 0 2px 8px rgba(0, 0, 0, 0.5);
            position: relative;
            z-index: 1;
        }

        .header p {
            font-size: 1.1em;
            opacity: 0.9;
            position: relative;
            z-index: 1;
        }

        .input-section {
            padding: 30px;
            border-bottom: 1px solid rgba(59, 130, 246, 0.2);
            background: rgba(17, 24, 39, 0.5);
        }

        .input-group {
            margin-bottom: 20px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #93bbfc;
            font-size: 1.1em;
        }

        textarea {
            width: 100%;
            height: 150px;
            padding: 15px;
            border: 2px solid #1e3a8a;
            border-radius: 10px;
            background: rgba(15, 23, 42, 0.8);
            color: #e0e7ff;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            resize: vertical;
            transition: all 0.3s ease;
        }

        textarea:focus {
            outline: none;
            border-color: #3b82f6;
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.2);
            background: rgba(15, 23, 42, 1);
        }

        textarea::placeholder {
            color: #64748b;
        }

        .btn-container {
            text-align: center;
            margin-top: 20px;
        }

        .analyze-btn {
            background: linear-gradient(135deg, #2563eb 0%, #1e40af 100%);
            color: white;
            border: none;
            padding: 15px 40px;
            font-size: 1.1em;
            font-weight: 600;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(37, 99, 235, 0.4);
            position: relative;
            overflow: hidden;
        }

        .analyze-btn::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 50%;
            transform: translate(-50%, -50%);
            transition: width 0.6s, height 0.6s;
        }

        .analyze-btn:hover::before {
            width: 300px;
            height: 300px;
        }

        .analyze-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(37, 99, 235, 0.6);
        }

        .analyze-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        .results-section {
            padding: 30px;
            display: none;
            background: rgba(17, 24, 39, 0.3);
        }

        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: linear-gradient(135deg, rgba(37, 99, 235, 0.1) 0%, rgba(30, 64, 175, 0.2) 100%);
            color: white;
            padding: 25px 20px;
            border-radius: 15px;
            text-align: center;
            border: 1px solid rgba(59, 130, 246, 0.3);
            transition: all 0.3s ease;
        }

        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(37, 99, 235, 0.3);
            border-color: rgba(59, 130, 246, 0.5);
        }

        .stat-number {
            font-size: 2.5em;
            font-weight: bold;
            margin-bottom: 5px;
            background: linear-gradient(135deg, #60a5fa 0%, #93bbfc 100%);
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .stat-label {
            font-size: 0.9em;
            opacity: 0.8;
            color: #cbd5e1;
        }

        .filter-controls {
            display: flex;
            gap: 15px;
            margin-bottom: 30px;
            flex-wrap: wrap;
            align-items: center;
        }

        .filter-btn {
            padding: 10px 25px;
            border: 2px solid #1e3a8a;
            background: transparent;
            color: #93bbfc;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 500;
        }

        .filter-btn:hover {
            background: rgba(37, 99, 235, 0.1);
            border-color: #2563eb;
        }

        .filter-btn.active {
            background: #2563eb;
            border-color: #2563eb;
            color: white;
            box-shadow: 0 4px 15px rgba(37, 99, 235, 0.4);
        }

        .search-box {
            flex: 1;
            min-width: 250px;
            padding: 10px 20px;
            border: 2px solid #1e3a8a;
            border-radius: 25px;
            font-size: 16px;
            background: rgba(15, 23, 42, 0.8);
            color: #e0e7ff;
            transition: all 0.3s ease;
        }

        .search-box:focus {
            outline: none;
            border-color: #3b82f6;
            background: rgba(15, 23, 42, 1);
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.2);
        }

        .search-box::placeholder {
            color: #64748b;
        }

        .decorations-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 20px;
        }

        .decoration-card {
            background: rgba(30, 41, 59, 0.8);
            border-radius: 15px;
            padding: 20px;
            text-align: center;
            transition: all 0.3s ease;
            border: 2px solid transparent;
            position: relative;
            overflow: hidden;
        }

        .decoration-card::before {
            content: '';
            position: absolute;
            top: -2px;
            left: -2px;
            right: -2px;
            bottom: -2px;
            background: linear-gradient(45deg, transparent, #2563eb, transparent);
            border-radius: 15px;
            opacity: 0;
            transition: opacity 0.3s ease;
            z-index: -1;
        }

        .decoration-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.5);
        }

        .decoration-card:hover::before {
            opacity: 1;
        }

        .decoration-card.owned {
            background: linear-gradient(135deg, rgba(34, 197, 94, 0.2) 0%, rgba(22, 163, 74, 0.3) 100%);
            border-color: rgba(34, 197, 94, 0.5);
        }

        .decoration-card.missing {
            background: linear-gradient(135deg, rgba(239, 68, 68, 0.1) 0%, rgba(220, 38, 38, 0.2) 100%);
            border-color: rgba(239, 68, 68, 0.3);
            opacity: 0.7;
        }

        .decoration-image {
            width: 80px;
            height: 80px;
            margin: 0 auto 15px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2.5em;
            transition: all 0.3s ease;
            object-fit: contain;
            background: rgba(15, 23, 42, 0.5);
            border: 1px solid rgba(59, 130, 246, 0.2);
        }

        .decoration-card:hover .decoration-image {
            transform: scale(1.1);
        }

        .decoration-card.owned .decoration-image {
            background: rgba(34, 197, 94, 0.1);
            border-color: rgba(34, 197, 94, 0.3);
        }

        .decoration-card.missing .decoration-image {
            filter: grayscale(100%);
            opacity: 0.6;
        }

        .decoration-name {
            font-weight: 600;
            color: #e0e7ff;
            margin-bottom: 5px;
            font-size: 0.95em;
        }

        .decoration-code {
            font-size: 0.75em;
            color: #64748b;
            font-family: 'Courier New', monospace;
            margin-bottom: 10px;
        }

        .status-indicator {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 15px;
            font-size: 0.75em;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .status-owned {
            background: rgba(34, 197, 94, 0.2);
            color: #4ade80;
            border: 1px solid rgba(34, 197, 94, 0.4);
        }

        .status-missing {
            background: rgba(239, 68, 68, 0.2);
            color: #f87171;
            border: 1px solid rgba(239, 68, 68, 0.4);
        }

        .error-message {
            background: rgba(239, 68, 68, 0.1);
            border: 1px solid rgba(239, 68, 68, 0.3);
            color: #f87171;
            padding: 15px;
            border-radius: 10px;
            margin-top: 20px;
            text-align: center;
        }

        .loading {
            text-align: center;
            padding: 40px;
            color: #64748b;
        }

        .spinner {
            width: 40px;
            height: 40px;
            border: 4px solid rgba(59, 130, 246, 0.2);
            border-top: 4px solid #3b82f6;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        @media (max-width: 768px) {
            .header h1 {
                font-size: 2em;
            }
            
            .decorations-grid {
                grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
                gap: 15px;
            }
            
            .filter-controls {
                flex-direction: column;
            }
            
            .search-box {
                min-width: 100%;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>🏰 CoC Decoration Checker</h1>
            <p>Paste your JSON data to see which decorations you own!</p>
        </div>

        <div class="input-section">
            <div class="input-group">
                <label for="jsonInput">Paste your JSON data here:</label>
                <textarea id="jsonInput" placeholder='Paste your Clash of Clans JSON data here...'></textarea>
            </div>
            <div class="btn-container">
                <button class="analyze-btn" onclick="analyzeDecorations()">🔍 Analyze Decorations</button>
            </div>
            <div id="errorMessage"></div>
        </div>

        <div class="results-section" id="resultsSection">
            <div class="stats" id="statsContainer"></div>
            
            <div class="filter-controls">
                <button class="filter-btn active" onclick="filterDecorations('all', event)">All</button>
                <button class="filter-btn" onclick="filterDecorations('owned', event)">Owned</button>
                <button class="filter-btn" onclick="filterDecorations('missing', event)">Missing</button>
                <input type="text" class="search-box" id="searchBox" placeholder="🔍 Search decorations..." oninput="searchDecorations()">
            </div>
            
            <div class="decorations-grid" id="decorationsGrid"></div>
        </div>
    </div>

    <script>
        // Complete decoration data with all 186 decorations
        const decorationData = {
  "18000000": { "name": "Barbarian Statue", "image": "images/decorations/barbarian_statue.png" },
  "18000001": { "name": "Torch", "image": "images/decorations/torch.png" },
  "18000002": { "name": "Goblin Pole", "image": "images/decorations/Decoration_HV_Goblin_Explorer.png" },
  "18000003": { "name": "White Flag", "image": "images/decorations/Decoration_HV_White_Flag.png" },
  "18000004": { "name": "Skull Flag", "image": "images/decorations/Decoration_HV_Pirate_Flag.png" },
  "18000005": { "name": "Flower box 1", "image": "images/decorations/Decoration_HV_Sunflower_Bed.png" },
  "18000006": { "name": "Flower box 2", "image": "images/decorations/Decoration_HV_Cornflower_Bed.png" },
  "18000007": { "name": "Windmeter", "image": "images/decorations/Decoration_HV_Weather_Vane.png" },
  "18000008": { "name": "Down Arrow Flag", "image": "images/decorations/Decoration_HV_Rally_Flag.png" },
  "18000009": { "name": "Up Arrow Flag", "image": "images/decorations/Decoration_HV_Point_Flag.png" },
  "18000010": { "name": "Skull Altar", "image": "images/decorations/Decoration_HV_Ancient_Skull.png" },
  "18000033": { "name": "PEKKA Statue", "image": "images/decorations/Decoration_HV_PEKKA_Statue.png" },
  "18000037": { "name": "BK Statue", "image": "images/decorations/Decoration_HV_Barbarian_King_Statue.png" },
  "18000038": { "name": "Torch 2", "image": "images/decorations/torch.png" },
  "18000039": { "name": "Small_Pine Tree", "image": "images/decorations/Obstacle_HV_Small_Tree.png" },
  "18000040": { "name": "Big_Pine Tree", "image": "images/decorations/Obstacle_HV_Large_Tree.png" },
  "18000041": { "name": "Old Barbarian Statue", "image": "images/decorations/ancient_barbarian_statue.png" },
  "18000042": { "name": "Stone Path", "image": "images/decorations/Decoration_BB_Stone_Path.png" },
  "18000043": { "name": "Archer Queen Statue", "image": "images/decorations/Decoration_BB_Archer_Queen_Statue.png" },
  "18000044": { "name": "Target", "image": "images/decorations/Decoration_BB_Target.png" },
  "18000045": { "name": "Fireplace", "image": "images/decorations/Decoration_BB_Bonfire.png" },
  "18000046": { "name": "Builder Statue", "image": "images/decorations/Decoration_HV_Builder_Statue.png" },
  "18000047": { "name": "Rex Calibur", "image": "images/decorations/Decoration_HV_The_Champion_Statue.png" },
  "18000048": { "name": "League I Statue", "image": "images/decorations/Decoration_HV_The_Master_Statue.png" },
  "18000049": { "name": "League II Statue", "image": "images/decorations/Decoration_HV_The_Contender_Statue.png" },
  "18000050": { "name": "League III Statue", "image": "images/decorations/Decoration_HV_The_Challenger_Statue.png" },
  "18000051": { "name": "Shield Statue", "image": "images/decorations/Decoration_HV_The_Warrior_Statue.png" },
  "18000052": { "name": "Golden Hog", "image": "images/decorations/Decoration_HV_ Golden_Piggy_Bank.png" },
  "18000053": { "name": "Firecrackers", "image": "images/decorations/Obstacle_HV_Firework_Stash.png" },
  "18000054": { "name": "Snowman", "image": "images/decorations/Decoration_HV_Snowman.png" },
  "18000055": { "name": "Snowman", "image": "images/decorations/Decoration_HV_Snowman.png" },
  "18000056": { "name": "BattleMachineStatue", "image": "images/decorations/Decoration_BB_Battle_Machine_Statue.png" },
  "18000057": { "name": "Dragon Statue", "image": "images/decorations/Decoration_HV_Dragon_Statue.png" },
  "18000058": { "name": "Golden Goblin", "image": "images/decorations/Decoration_HV_Golden_Poet.png" },
  "18000059": { "name": "SuperTroopStatue", "image": "images/decorations/Decoration_HV_Super_Statue.png" },
  "18000060": { "name": "ShortFilmStatue", "image": "images/decorations/short_film_statue.png" },
  "18000061": { "name": "SC 10Year Fountain", "image": "images/decorations/Decoration_HV_Anniversary_Fountain.png" },
  "18000062": { "name": "Clockwork Statue", "image": "images/decorations/Decoration_HV_Clockwork_Statue.png" },
  "18000063": { "name": "8 Year Birthday Statue", "image": "images/decorations/Decoration_HV_A_Piece_Of_Birthday_Cake.png" },
  "18000064": { "name": "Pirate Deco", "image": "images/decorations/Decoration_HV_Anchor_Statue.png" },
  "18000065": { "name": "Logmas Deco", "image": "images/decorations/Decoration_HV_Logmas_Tree.png" },
  "18000066": { "name": "Golden Wall Breaker", "image": "images/decorations/Decoration_HV_Firework_Fanboy.png" },
  "18000067": { "name": "Jungle Deco", "image": "images/decorations/jungle_deco.png" },
  "18000068": { "name": "9 Year Birthday Statue", "image": "images/decorations/Obstacle_HV_9th_Anniversary_Cake.png" },
  "18000069": { "name": "Fallen Wizard Statue", "image": "images/decorations/Decoration_HV_Wizard_Statue.png" },
  "18000070": { "name": "10 Year Birthday Statue", "image": "images/decorations/Obstacle_HV_10th_Anniversary_Cake.png" },
  "18000071": { "name": "Clash Fest Statue", "image": "images/decorations/clash_fest_22_statue.png" },
  "18000072": { "name": "Clashmas22 Deco", "image": "images/decorations/Obstacle_HV_Clashmas_Tree_2022.png" },
  "18000073": { "name": "LNY2023Statue", "image": "images/decorations/statue_lny_2023.png" },
  "18000074": { "name": "Baby Dragon Painted", "image": "images/decorations/deco_painted_baby_dragon.png" },
  "18000075": { "name": "Dark Ages Dragon_Statue", "image": "images/decorations/deco_dark_ages_dragon.png" },
  "18000076": { "name": "BB2 Bonfire", "image": "images/decorations/Decoration_BB_Bonfire_2.png" },
  "18000077": { "name": "BB2 Torch", "image": "images/decorations/torch_BBB.png" },
  "18000078": { "name": "BB2 Target", "image": "images/decorations/Decoration_BB_Target_2.png" },
  "18000079": { "name": "Terry Statue", "image": "images/decorations/Decoration_HV_Books_of_Clash_Statue_active.png" },
  "18000080": { "name": "BB2 Statue", "image": "images/decorations/Decoration_BB_Master_Builder_Return.png" },
  "18000081": { "name": "Goblin Gold Chest", "image": "images/decorations/deco_goblin_chest.png" },
  "18000082": { "name": "Goblin Gold Cart", "image": "images/decorations/deco_goblin_cart.png" },
  "18000089": { "name": "Goblin Cellar", "image": "images/decorations/deco_goblin_cellar.png" },
  "18000090": { "name": "Goblin Dragon Statue", "image": "images/decorations/Decoration_HV_Goblin_Dragon_Statue.png" },
  "18000091": { "name": "Goblin Barrel", "image": "images/decorations/deco_goblin_barrel.png" },
  "18000092": { "name": "CWL hammer", "image": "images/decorations/deco_cwl_hammer.png" },
  "18000093": { "name": "CWL shield", "image": "images/decorations/deco_cwl_shield.png" },
  "18000094": { "name": "Razer Promo Deco", "image": "images/decorations/deco_razer_promo.png" },
  "18000095": { "name": "Barbarian Flexing Statue 2023", "image": "images/decorations/deco_flexing_barb.png" },
  "18000096": { "name": "Halloween2023_coffin", "image": "images/decorations/Decoration_HV_Coffin.png" },
  "18000097": { "name": "Halloween2023_clown_statue", "image": "images/decorations/Decoration_HV_Hoggywise.png" },
  "18000098": { "name": "Halloween2023_dead_jakuzzi", "image": "images/decorations/deco_dead_jakuzzi.png" },
  "18000099": { "name": "Halloween2023_scarecrow", "image": "images/decorations/deco_scarecrow.png" },
  "18000100": { "name": "Halloween2023_completion_cauldron", "image": "images/decorations/clashoween_building.png" },
  "18000101": { "name": "World Finals23 Statue", "image": "images/decorations/Decoration_HV_World_Finals_23_Statue.png" },
  "18000102": { "name": "Fountain Rework", "image": "images/decorations/generic_2.png" },
  "18000103": { "name": "Bath", "image": "images/decorations/Decoration_HV_Duck_Bath.png" },
  "18000104": { "name": "Box2", "image": "images/decorations/generic_3.png" },
  "18000105": { "name": "Beet", "image": "images/decorations/generic_4.png" },
  "18000106": { "name": "Carrot", "image": "images/decorations/generic_5.png" },
  "18000107": { "name": "Corn", "image": "images/decorations/generic_6.png" },
  "18000108": { "name": "Fertilizer", "image": "images/decorations/generic_7.png" },
  "18000109": { "name": "Hog Park", "image": "images/decorations/Decoration_HV_Hog_Pen.png" },
  "18000110": { "name": "Straw", "image": "images/decorations/generic_8.png" },
  "18000111": { "name": "Tomato", "image": "images/decorations/generic_9.png" },
  "18000112": { "name": "WheelbarrowRock", "image": "images/decorations/generic_10.png" },
  "18000113": { "name": "WoodPile", "image": "images/decorations/generic_11.png" },
  "18000114": { "name": "ClashClam", "image": "images/decorations/Decoration_HV_Cozy_Clam.png" },
  "18000115": { "name": "ClashMas2023_dough_building", "image": "images/decorations/Decroration_HV_Gingerbread_ Hub_2.png" },
  "18000116": { "name": "ClashMas2023_jinglebell", "image": "images/decorations/Decroration_HV_Jingle_Bell.png" },
  "18000117": { "name": "ClashMas2023_hogmaster", "image": "images/decorations/deco_hogmaster.png" },
  "18000118": { "name": "ClashMas2023_sock", "image": "images/decorations/Decroration_HV_Skeleton_Sock.png" },
  "18000119": { "name": "CNY_2023_anchor", "image": "images/decorations/Decoration_HV_Lucky_Anchor.png" },
  "18000120": { "name": "CNY_2023_Crab", "image": "images/decorations/Decoration_HV_Crab_at_home_1.png" },
  "18000121": { "name": "CNY_2023_dragon", "image": "images/decorations/Decoration_HV_Baby_Dragon_Statue.png" },
  "18000122": { "name": "LNY_2024_dragonpinata", "image": "images/decorations/Decoration_HV_Dragon_Pinata.png" },
  "18000123": { "name": "Space_2024_crater", "image": "images/decorations/Decoration_HV_Clashy_Crater.png" },
  "18000124": { "name": "Space_2024_globe", "image": "images/decorations/Decoration_HV_Stone_Globe.png" },
  "18000125": { "name": "Space_2024_goblin_statue", "image": "images/decorations/deco_space_2024_goblin_statue.png" },
  "18000126": { "name": "Egypt_2024_babydragon", "image": "images/decorations/deco_egypt_2024_babydragon.png" },
  "18000127": { "name": "Egypt_2024_goblin", "image": "images/decorations/deco_egypt_2024_goblin.png" },
  "18000128": { "name": "Egypt_2024_hog", "image": "images/decorations/deco_egypt_2024_hog.png" },
  "18000129": { "name": "CW_gift_crownsword", "image": "images/decorations/deco_gift_2024_crownsword.png" },
  "18000130": { "name": "Game Campaign", "image": "images/decorations/deco_game_campaign.png" },
  "18000131": { "name": "clashball_goldenboot", "image": "images/decorations/Decoration_HV_Golden_Boot.png" },
  "18000132": { "name": "clashball_trophyball", "image": "images/decorations/Decoration_HV_Trophy_Ball.png" },
  "18000133": { "name": "clashball_statuecharacter", "image": "images/decorations/Decoration_HV_Haaland_Statue.png" },
  "18000134": { "name": "clashball_trophycrown", "image": "images/decorations/Decoration_HV_Trophy_Crown.png" },
  "18000135": { "name": "clashball_trophycup", "image": "images/decorations/Decoration_HV_Trophy_Cup.png" },
  "18000136": { "name": "clashball_trophybeverage", "image": "images/decorations/Decoration_HV_Milk_Trophy.png" },
  "18000137": { "name": "WildWest_cactus", "image": "images/decorations/WildWest_Deco_Cactus_High.png" },
  "18000138": { "name": "WildWest_skelly", "image": "images/decorations/WildWest_Deco_Skelly_High.png" },
  "18000139": { "name": "WildWest_totem", "image": "images/decorations/WildWest_Deco_Totem_High.png" },
  "18000140": { "name": "Clashball2024_completion_deco_goal", "image": "images/decorations/Obstacle_HV_Mysterious_Object_Haaland_Event.png" },
  "18000141": { "name": "Anime_FORTUNE_TELLER", "image": "images/decorations/deco_anime_fortuneteller.png" },
  "18000143": { "name": "Anime_bonsaitree", "image": "images/decorations/Anime_CherryBonsaiTree.png" },
  "18000144": { "name": "Anime_chibi_archer", "image": "images/decorations/Anime_ChibiArcher.png" },
  "18000145": { "name": "Anime_giant_school_girl", "image": "images/decorations/Anime_SuperDeco_Giant_Schoolgirl.png" },
  "18000146": { "name": "SC_Store_beachparasol", "image": "images/decorations/deco_sc_beach_parasol.png" },
  "18000147": { "name": "SC_Store_brawlstars", "image": "images/decorations/deco_sc_brawlstars.png" },
  "18000148": { "name": "SC_Store_gauntlet", "image": "images/decorations/deco_sc_gauntlet.png" },
  "18000149": { "name": "SC_Store_haybalechicken", "image": "images/decorations/deco_sc_hayday_chicken.png" },
  "18000150": { "name": "SC_Store_royalebed", "image": "images/decorations/deco_sc_royale_bed.png" },
  "18000151": { "name": "ClashGames_firebowl", "image": "images/decorations/Decoration_ClashGames_Firebowl.png" },
  "18000152": { "name": "ClashGames_goblindive", "image": "images/decorations/deco_clashgames_goblindive.png" },
  "18000153": { "name": "ClashGames_archerfoot", "image": "images/decorations/Decoration_ClashGames_ArcherFoot.png" },
  "18000154": { "name": "TTRPG_treeportal", "image": "images/decorations/deco_ttrpg_treeportal.png" },
  "18000155": { "name": "TTRPG_superdeco_d20", "image": "images/decorations/TTRPG_SuperDeco_Dice_Roll.png" },
  "18000156": { "name": "TTRPG_mimic_chest", "image": "images/decorations/ttrpg_mimic_chest.png" },
  "18000157": { "name": "Clashoween2024_completion_deco", "image": "images/decorations/Obstacle_HV_Cauldron_Smiling.png" },
  "18000158": { "name": "Clashoween2024_prisonbox", "image": "images/decorations/Obstacle_HV_Prison_Box.png" },
  "18000159": { "name": "Clashoween2024_superdeco_cauldron", "image": "images/decorations/clashoween2024_superdeco.png" },
  "18000160": { "name": "Superdeco_mochapot", "image": "images/decorations/superdeco_mochapot.png" },
  "18000161": { "name": "Diwali_Statue_Event_Deco_2x2", "image": "images/decorations/diwali_statue.png" },
  "18000162": { "name": "Clashmas_2024_completion_deco", "image": "images/decorations/clashmas2024_completion.png" },
  "18000163": { "name": "Clashmas_2024_choir", "image": "images/decorations/Clashmas24_Choir.png" },
  "18000164": { "name": "Clashmas2024_superdeco_globe", "image": "images/decorations/Clashmas24_SnowGlobe.png" },
  "18000165": { "name": "Clashmas_2024_Sack", "image": "images/decorations/clashmas2024_sack.png" },
  "18000166": { "name": "Lny_2025_completion_deco", "image": "images/decorations/LNY25_WoodenEgg_Snake Sculpture Obstacle.png" },
  "18000167": { "name": "Lny_2025_monkstatue_deco", "image": "images/decorations/LNY25_Monk_Statue_Marketing.png" },
  "18000168": { "name": "Fire_Ice_superdeco_sauna", "image": "images/decorations/Fire&Ice_Sauna_Super_Deco.png" },
  "18000169": { "name": "Lny_2025_superdeco_fortunecookie", "image": "images/decorations/LNY25_Fortune Cookie_SuperDeco.png" },
  "18000170": { "name": "Military_2025_super_deco_range", "image": "images/decorations/military2025_range.png" },
  "18000171": { "name": "April_2025_completion_deco", "image": "images/decorations/april2025_completion.png" },
  "18000172": { "name": "April_2025_goblins_deco", "image": "images/decorations/apr25_hv_deco_goblin_marketing.png" },
  "18000173": { "name": "April_2025_coc_giant_deco", "image": "images/decorations/apr25_hv_deco_giant_marketing.png" },
  "18000174": { "name": "Deco_AQ_PouringStatue", "image": "images/decorations/aq_pouring_statue.png" },
  "18000175": { "name": "April_2025_super_deco", "image": "images/decorations/april2025_superdeco.png" },
  "18000176": { "name": "Japan_2025_deco", "image": "images/decorations/japan2025_deco.png" },
  "18000177": { "name": "DarkDays_2025_super_deco", "image": "images/decorations/DarkDays_SuperDeco_Piano.png" },
  "18000178": { "name": "Darkdays_2025_completion_deco", "image": "images/decorations/darkdays2025_completion.png" },
  "18000179": { "name": "Clasharama_frozen_wizard_hv_deco", "image": "images/decorations/clasharama_frozen_wizard.png" },
  "18000180": { "name": "clasharama_ep01_super_deco", "image": "images/decorations/clasharama_ep01_superdeco.png" },
  "18000181": { "name": "clasharama_ep02_super_deco_paint", "image": "images/decorations/clasharama_ep02_paint.png" },
  "18000182": { "name": "CyberClash_superdeco_holoprojector", "image": "images/decorations/CyberClash_SuperDeco_Holoprojector.png" },
  "18000183": { "name": "CLASHARAMA_SODASTAND_DECO", "image": "images/decorations/clasharama_sodastand.png" },
  "18000184": { "name": "CLASHARAMA_TABLE_DECO", "image": "images/decorations/clasharama_table.png" },
  "18000185": { "name": "COMMUNITY_CROWN_AND_SWORD_DECO", "image": "images/decorations/community_crown_sword.png" }
};

let userDecorations = new Set();
        let allDecorations = []; 
        let currentFilter = 'all'; 

        // Refined function to extract 'data' codes that are decoration IDs
        function extractCodesFromJSON(obj, codes = new Set()) {
            if (typeof obj === 'object' && obj !== null) {
                if (Array.isArray(obj)) {
                    // If it's an array, iterate through its elements
                    obj.forEach(item => extractCodesFromJSON(item, codes));
                } else {
                    // If it's an object, check for a 'data' property
                    if (obj.hasOwnProperty('data') && typeof obj.data === 'number') {
                        // Only add to the set if it's a known decoration ID
                        if (decorationData[obj.data]) {
                            codes.add(obj.data);
                        }
                    }

                    // Recursively go through all other properties of the object
                    for (const key in obj) {
                        // Avoid infinite loops for self-referencing objects, though unlikely in CoC JSON
                        if (obj.hasOwnProperty(key) && typeof obj[key] === 'object' && obj[key] !== null) {
                            extractCodesFromJSON(obj[key], codes);
                        }
                    }
                }
            }
            return codes;
        }

        function analyzeDecorations() {
            const jsonInput = document.getElementById('jsonInput').value.trim();
            const errorDiv = document.getElementById('errorMessage');
            
            errorDiv.innerHTML = ''; 
            document.getElementById('resultsSection').style.display = 'none';

            if (!jsonInput) {
                errorDiv.innerHTML = '<div class="error-message">Please paste your JSON data first!</div>';
                return;
            }

            try {
                const parsedJson = JSON.parse(jsonInput);
                
                // Extract decoration codes owned by the user using the refined function
                userDecorations = extractCodesFromJSON(parsedJson);
                
                // Populate allDecorations array based on the master decorationData list
                // and mark them as owned or missing
                allDecorations = Object.entries(decorationData).map(([codeStr, details]) => {
                    const code = parseInt(codeStr);
                    return {
                        code: code,
                        name: details.name,
                        image: details.image,
                        owned: userDecorations.has(code)
                    };
                });

                displayResults();
                
            } catch (error) {
                console.error("Error parsing JSON:", error);
                errorDiv.innerHTML = '<div class="error-message">Invalid JSON format. Please check your data and try again.</div>';
            }
        }

        function displayResults() {
            const resultsSection = document.getElementById('resultsSection');
            const statsContainer = document.getElementById('statsContainer');
            
            resultsSection.style.display = 'block'; 
            
            const ownedCount = allDecorations.filter(d => d.owned).length;
            const totalCount = allDecorations.length;
            const missingCount = totalCount - ownedCount;
            const percentage = totalCount > 0 ? Math.round((ownedCount / totalCount) * 100) : 0;
            
            statsContainer.innerHTML = `
                <div class="stat-card">
                    <div class="stat-number">${ownedCount}</div>
                    <div class="stat-label">Owned Decorations</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">${missingCount}</div>
                    <div class="stat-label">Missing Decorations</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">${percentage}%</div>
                    <div class="stat-label">Collection Complete</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">${totalCount}</div>
                    <div class="stat-label">Total Decorations</div>
                </div>
            `;
            
            // Set 'all' filter as active initially and display all decorations
            filterDecorations('all', null); // Pass null for event to avoid errors
            document.querySelector('.filter-btn.active')?.classList.remove('active'); // Use optional chaining to prevent error if not found
            document.querySelector('[onclick="filterDecorations(\'all\', event)"]').classList.add('active'); 
        }

        function filterDecorations(filter, event) {
            currentFilter = filter;
            
            // Update active button only if event is provided (i.e., clicked by user)
            if (event) {
                document.querySelectorAll('.filter-btn').forEach(btn => btn.classList.remove('active'));
                event.target.classList.add('active');
            }
            
            let filtered = [...allDecorations]; 

            switch (filter) {
                case 'owned':
                    filtered = filtered.filter(d => d.owned);
                    break;
                case 'missing':
                    filtered = filtered.filter(d => !d.owned);
                    break;
                default:
                    break;
            }
            
            const searchTerm = document.getElementById('searchBox').value.toLowerCase();
            if (searchTerm) {
                filtered = filtered.filter(d => 
                    d.name.toLowerCase().includes(searchTerm) ||
                    d.code.toString().includes(searchTerm)
                );
            }
            
            displayDecorations(filtered); 
        }

        function searchDecorations() {
            filterDecorations(currentFilter, null); 
        }

        function displayDecorations(decorationsToDisplay) {
            const decorationsGrid = document.getElementById('decorationsGrid');
            decorationsGrid.innerHTML = ''; 

            if (decorationsToDisplay.length === 0) {
                decorationsGrid.innerHTML = '<p style="text-align: center; color: #666; padding: 20px;">No decorations found matching your criteria.</p>';
                return;
            }

            decorationsToDisplay.forEach(decoration => {
                const card = document.createElement('div');
                card.classList.add('decoration-card');
                card.classList.add(decoration.owned ? 'owned' : 'missing');

                let imageHtml = '';
                if (decoration.image) {
                    imageHtml = `<img src="${decoration.image}" alt="${decoration.name}" class="decoration-image">`;
                } else {
                    // Fallback if image path is missing or empty
                    imageHtml = `<div class="decoration-image" style="background-color: #f0f0f0;">✨</div>`; // A generic icon or placeholder
                }

                card.innerHTML = `
                    ${imageHtml}
                    <div class="decoration-name">${decoration.name}</div>
                    <div class="decoration-code">ID: ${decoration.code}</div>
                    <span class="status-indicator ${decoration.owned ? 'status-owned' : 'status-missing'}">
                        ${decoration.owned ? 'Owned' : 'Missing'}
                    </span>
                `;
                decorationsGrid.appendChild(card);
            });
        }
    </script>
</body>
</html>